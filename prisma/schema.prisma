generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  userId    String      @id @default(uuid())
  firstName String
  lastName  String
  email     String      @unique
  password  String
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  restaurants Restaurant[]
  carts     Cart[]
}

model Restaurant {
  restaurantId String     @id @default(uuid())
  ownerId      String
  name         String
  address      String
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  owner        User       @relation(fields: [ownerId], references: [userId], onDelete: Cascade)
  foodItems    FoodItem[]
  carts        Cart[]
}

model FoodItem {
  foodId       String   @id @default(uuid())
  restaurantId String
  name         String
  price        Decimal  @db.Decimal(10, 2)
  inStock      Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  restaurant   Restaurant @relation(fields: [restaurantId], references: [restaurantId], onDelete: Cascade)
  cartItems    CartItem[]
}

model Cart {
  cartId       String     @id @default(uuid())
  userId       String
  restaurantId String
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  user         User       @relation(fields: [userId], references: [userId], onDelete: Cascade)
  restaurant   Restaurant @relation(fields: [restaurantId], references: [restaurantId], onDelete: Cascade)
  items        CartItem[]
}

model CartItem {
  cartItemId String   @id @default(uuid())
  cartId     String
  foodId     String
  quantity   Int
  userNote   String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  cart       Cart     @relation(fields: [cartId], references: [cartId], onDelete: Cascade)
  foodItem   FoodItem @relation(fields: [foodId], references: [foodId], onDelete: Cascade)
}

